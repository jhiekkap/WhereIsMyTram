{"ast":null,"code":"import _slicedToArray from \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/App.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  {\\n    stopsByRadius(lat: 60.170627, lon: 24.939946, radius: 300) {\\n      edges {\\n        node {\\n          stop {\\n            id\\n            gtfsId\\n            name\\n            lat\\n            lon\\n            vehicleType\\n          }\\n        }\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setTrams } from './reducers/tramsReducer';\nimport { setShowSidebar } from './reducers/showSidebarReducer';\nimport { setShowSidebarOpenButton } from './reducers/showSidebarOpenButtonReducer';\nimport { setStops } from './reducers/stopsReducer';\nimport { setMyStop } from './reducers/myStopReducer';\nimport { setShowTrams } from './reducers/showTramsReducer';\nimport './App.css';\nimport LeafletMap from './components/LeafletMap';\nimport Sidebar from './components/Sidebar';\nimport ApolloClient, { gql } from 'apollo-boost';\nimport { Alert } from 'react-bootstrap';\nconst client = new ApolloClient({\n  uri: 'https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql'\n});\nconst query = gql(_templateObject());\n\nconst App = ({\n  setTrams,\n  setShowTrams,\n  setShowSidebar,\n  setShowSidebarOpenButton,\n  setStops,\n  setMyStop\n}) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        show = _useState2[0],\n        setShow = _useState2[1];\n\n  useEffect(() => {\n    client.query({\n      query\n    }).then(response => {\n      let edges = response.data.stopsByRadius.edges;\n      let stopit = edges.map(edge => edge.node.stop).filter(stop => stop.vehicleType === 0);\n      setStops(stopit);\n      setMyStop(stopit[0]);\n      console.log('EDGES: ', edges);\n      console.log('STOPIT: ', stopit);\n      edges.forEach(edge => {\n        console.log('HSL: ', edge.node.stop);\n      });\n    });\n  });\n\n  const update = () => {\n    //fetch('http://localhost:3001/trams')\n    fetch('/trams').then(response => response.json()).then(body => {\n      setTrams(body);\n      setShowTrams(body);\n    }).catch(error => {\n      console.log(error);\n    });\n  }; //useEffect(() => update(), [new Date()])\n\n\n  setInterval(() => {\n    update();\n  }, 1000);\n\n  const openSidebar = () => {\n    setShowSidebar(true);\n    setShowSidebarOpenButton(false);\n    console.log('open!');\n  };\n\n  const closeSidebar = () => {\n    setShowSidebar(false);\n    setTimeout(() => {\n      setShowSidebarOpenButton(true);\n    }, 300);\n    console.log('close!');\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(Alert, {\n    show: show,\n    variant: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(Alert.Heading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"How's it going?!\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Cras mattis consectetur purus sit amet fermentum.\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => setShow(false),\n    variant: \"outline-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Close me ya'll!\"))), React.createElement(Sidebar, {\n    closeSidebar: closeSidebar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(LeafletMap, {\n    openSidebar: openSidebar,\n    closeSidebar: closeSidebar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }));\n};\n/* const mapStateToProps = state => {\n  return {\n    stops: state.stops,\n    myStop: state.myStop,\n  }\n} */\n\n\nconst mapDispatchToProps = {\n  setTrams,\n  setShowSidebar,\n  setShowSidebarOpenButton,\n  setStops,\n  setMyStop,\n  setShowTrams\n};\nexport default connect(null, mapDispatchToProps)(App); ////////// GEOLOCATION\n\n/*   if (\"geolocation\" in navigator) {\n      console.log(\"geolocation is available\");\n    } else {\n      console.log(\"geolocation is NOT available\");\n    }\n    navigator.geolocation.getCurrentPosition(position => { \n  \n      const query = gql`\n        {\n          stopsByRadius(lat: ${position.coords.latitude}, lon: ${position.coords.longitude}, radius: 1000) {\n            edges {\n              node {\n                stop {\n                  id\n                  gtfsId\n                   name\n                  lat\n                  lon \n                }\n              }\n            }\n          }\n        }\n        ` \n      client.query({ query })\n        .then((response) => {\n          let edges = response.data.stopsByRadius.edges\n          setStops(edges)\n          edges.forEach(edge => {\n            console.log('HSL: ', edge.node.stop)\n          })\n        })\n      console.log(\"STARTING LOCATION \\nlatitude: \" + position.coords.latitude + \" longitude: \" + position.coords.longitude);\n    }); */","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/App.js"],"names":["React","useState","useEffect","connect","setTrams","setShowSidebar","setShowSidebarOpenButton","setStops","setMyStop","setShowTrams","LeafletMap","Sidebar","ApolloClient","gql","Alert","client","uri","query","App","show","setShow","then","response","edges","data","stopsByRadius","stopit","map","edge","node","stop","filter","vehicleType","console","log","forEach","update","fetch","json","body","catch","error","setInterval","openSidebar","closeSidebar","setTimeout","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport { setTrams } from './reducers/tramsReducer'\nimport { setShowSidebar } from './reducers/showSidebarReducer'\nimport { setShowSidebarOpenButton } from './reducers/showSidebarOpenButtonReducer'\nimport { setStops } from './reducers/stopsReducer'\nimport { setMyStop } from './reducers/myStopReducer'\nimport { setShowTrams } from './reducers/showTramsReducer'\nimport './App.css'\nimport LeafletMap from './components/LeafletMap'\nimport Sidebar from './components/Sidebar'\nimport ApolloClient, { gql } from 'apollo-boost'\nimport { Alert } from 'react-bootstrap'\n\nconst client = new ApolloClient({\n  uri: 'https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql',\n})\n\nconst query = gql`\n  {\n    stopsByRadius(lat: 60.170627, lon: 24.939946, radius: 300) {\n      edges {\n        node {\n          stop {\n            id\n            gtfsId\n            name\n            lat\n            lon\n            vehicleType\n          }\n        }\n      }\n    }\n  }\n`\n\nconst App = ({\n  setTrams,\n  setShowTrams,\n  setShowSidebar,\n  setShowSidebarOpenButton,\n  setStops,\n  setMyStop,\n}) => {\n  \n  const [show,setShow] = useState(false)\n\n  useEffect(() => {\n    client.query({ query }).then(response => {\n      let edges = response.data.stopsByRadius.edges\n      let stopit = edges\n        .map(edge => edge.node.stop)\n        .filter(stop => stop.vehicleType === 0)\n      setStops(stopit)\n      setMyStop(stopit[0])\n      console.log('EDGES: ', edges)\n      console.log('STOPIT: ', stopit)\n      edges.forEach(edge => {\n        console.log('HSL: ', edge.node.stop)\n      })\n    })\n  })\n\n  const update = () => {\n    //fetch('http://localhost:3001/trams')\n    fetch('/trams')\n      .then(response => response.json())\n      .then(body => {\n        setTrams(body)\n        setShowTrams(body)\n      })\n      .catch(error => {\n        console.log(error)\n      })\n  }\n\n  //useEffect(() => update(), [new Date()])\n  setInterval(() => {\n    update()\n  }, 1000)\n\n  const openSidebar = () => {\n    setShowSidebar(true)\n    setShowSidebarOpenButton(false)\n    console.log('open!')\n  }\n\n  const closeSidebar = () => {\n    setShowSidebar(false)\n    setTimeout(() => {\n      setShowSidebarOpenButton(true)\n    }, 300)\n    console.log('close!')\n  }\n\n  return (\n    <div>\n      <Alert show={show} variant='success'>\n        <Alert.Heading>How's it going?!</Alert.Heading>\n        <p>\n          Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget\n          lacinia odio sem nec elit. Cras mattis consectetur purus sit amet\n          fermentum.\n        </p>\n        <hr />\n        <div className='d-flex justify-content-end'>\n          <Button onClick={() => setShow(false)} variant='outline-success'>\n            Close me ya'll!\n          </Button>\n        </div>\n      </Alert>\n      <Sidebar closeSidebar={closeSidebar} />\n      <LeafletMap openSidebar={openSidebar} closeSidebar={closeSidebar} />\n    </div>\n  )\n}\n\n/* const mapStateToProps = state => {\n  return {\n    stops: state.stops,\n    myStop: state.myStop,\n  }\n} */\n\nconst mapDispatchToProps = {\n  setTrams,\n  setShowSidebar,\n  setShowSidebarOpenButton,\n  setStops,\n  setMyStop,\n  setShowTrams,\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(App)\n\n////////// GEOLOCATION\n\n/*   if (\"geolocation\" in navigator) {\n      console.log(\"geolocation is available\");\n    } else {\n      console.log(\"geolocation is NOT available\");\n    }\n    navigator.geolocation.getCurrentPosition(position => { \n  \n      const query = gql`\n        {\n          stopsByRadius(lat: ${position.coords.latitude}, lon: ${position.coords.longitude}, radius: 1000) {\n            edges {\n              node {\n                stop {\n                  id\n                  gtfsId\n                   name\n                  lat\n                  lon \n                }\n              }\n            }\n          }\n        }\n        ` \n      client.query({ query })\n        .then((response) => {\n          let edges = response.data.stopsByRadius.edges\n          setStops(edges)\n          edges.forEach(edge => {\n            console.log('HSL: ', edge.node.stop)\n          })\n        })\n      console.log(\"STARTING LOCATION \\nlatitude: \" + position.coords.latitude + \" longitude: \" + position.coords.longitude);\n    }); */\n"]},"metadata":{},"sourceType":"module"}