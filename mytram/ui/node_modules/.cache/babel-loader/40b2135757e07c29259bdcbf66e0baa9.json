{"ast":null,"code":"var _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/components/Sidebar.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setShowTrams } from '../reducers/showTramsReducer';\nimport { setMyStop } from '../reducers/myStopReducer';\nimport { setCenter } from '../reducers/centerReducer';\nimport { setZoom } from '../reducers/zoomReducer';\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap';\nimport distance from '../helpers';\n\nconst Sidebar = ({\n  closeSidebar,\n  showSidebar,\n  trams,\n  showTrams,\n  setShowTrams,\n  setCenter,\n  setZoom,\n  stops,\n  myStop,\n  setMyStop\n}) => {\n  const style = showSidebar ? {\n    width: '400px'\n  } : {\n    width: '0'\n  };\n\n  const handleShowMyTram = e => {\n    console.log('TRAM CHOSEN: ', e.target.value);\n    let chosenTram = trams.find(tram => tram.VP.veh.toString() === e.target.value);\n    console.log('chosen Tram:', chosenTram); //setShowTrams(showTrams.concat(chosenTram))\n\n    setShowTrams([chosenTram]);\n    setCenter({\n      lat: chosenTram.VP.lat,\n      lng: chosenTram.VP.long\n    });\n    setZoom(16);\n  };\n\n  const handleShowLine = e => {\n    console.log('LINE CHOSEN: ', e.target.value);\n    setShowTrams(trams.filter(tram => parseInt(tram.VP.desi) == e.target.value));\n    setZoom(13);\n  };\n\n  const handleChooseStop = e => {\n    console.log('STOP CHOSEN: ', e.target.value);\n    setMyStop(stops.find(stop => stop.gtfsId === e.target.value));\n  }; /// COMPARE FUNCTION FOR ARRAY SORT()\n\n\n  const sortByLineNumbers = (a, b) => {\n    return parseInt(a.VP.desi) < parseInt(b.VP.desi) ? -1 : parseInt(a.VP.desi) > parseInt(b.VP.desi) ? 1 : 0;\n  };\n\n  let tramsInOrder = [...trams];\n  tramsInOrder.sort(sortByLineNumbers);\n\n  const sortLineNumbers = (a, b) => {\n    return parseInt(a) < parseInt(b) ? -1 : parseInt(a) > parseInt(b) ? 1 : 0;\n  };\n\n  const lineNumbers = [];\n  trams.forEach(tram => {\n    if (!lineNumbers.includes(parseInt(tram.VP.desi))) {\n      lineNumbers.push(parseInt(tram.VP.desi));\n    }\n  });\n  lineNumbers.sort(sortLineNumbers);\n\n  if (trams.VP) {\n    const myTramsPosition = {\n      lat: trams[0].VP.lat,\n      lon: trams[0].VP.long\n    };\n    console.log('MY TRAM: ', myTramsPosition);\n  }\n\n  return React.createElement(\"div\", {\n    style: style,\n    className: \"sidebar\",\n    id: \"mySidebar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"javascript:void(0)\",\n    className: \"closebtn\",\n    onClick: () => closeSidebar(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"\\u2630\"), React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => {\n      setShowTrams(trams);\n      setZoom(13);\n    },\n    variant: \"outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"show all trams\")), React.createElement(Col, {\n    sm: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => setShowTrams([]),\n    variant: \"outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"hide all trams\"))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"exampleForm.ControlSelect2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Find my tram\"), React.createElement(Form.Control, {\n    as: \"select\",\n    onChange: handleShowMyTram,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, tramsInOrder.map((tram, i) => React.createElement(\"option\", {\n    key: i,\n    value: tram.VP.veh,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"line: \", tram.VP.desi, \" veh:\", tram.VP.veh))))), React.createElement(Col, {\n    sm: 3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"exampleForm.ControlSelect1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Show line\"), React.createElement(Form.Control, {\n    as: \"select\",\n    onChange: handleShowLine,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, lineNumbers.map((line, i) => React.createElement(\"option\", {\n    key: i,\n    value: line,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, line)))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(Col, {\n    sm: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"exampleForm.ControlSelect1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Closest stops\"), React.createElement(Form.Control, {\n    as: \"select\",\n    onChange: handleChooseStop,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, stops.map(stop => React.createElement(\"option\", {\n    key: stop.id,\n    value: stop.gtfsId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, stop.name, \" \", stop.gtfsId))))), React.createElement(Col, {\n    sm: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"exampleForm.ControlSelect1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(Form.Label, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"My stop : \", myStop && \"\".concat(myStop.name, \" \").concat(myStop.gtfsId))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, showTrams[0] && React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"distance from myTram to myStop: \", distance(myStop.lat, myStop.lon, showTrams[0].VP.lat, showTrams[0].VP.long))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    trams: state.trams,\n    showTrams: state.showTrams,\n    showSidebar: state.showSidebar,\n    stops: state.stops,\n    myStop: state.myStop\n  };\n};\n\nconst mapDispatchToProps = {\n  setShowTrams,\n  setMyStop,\n  setCenter,\n  setZoom\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/components/Sidebar.js"],"names":["React","connect","setShowTrams","setMyStop","setCenter","setZoom","Container","Row","Col","Form","Button","distance","Sidebar","closeSidebar","showSidebar","trams","showTrams","stops","myStop","style","width","handleShowMyTram","e","console","log","target","value","chosenTram","find","tram","VP","veh","toString","lat","lng","long","handleShowLine","filter","parseInt","desi","handleChooseStop","stop","gtfsId","sortByLineNumbers","a","b","tramsInOrder","sort","sortLineNumbers","lineNumbers","forEach","includes","push","myTramsPosition","lon","map","i","line","id","name","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { setShowTrams } from '../reducers/showTramsReducer'\nimport { setMyStop } from '../reducers/myStopReducer'\nimport { setCenter } from '../reducers/centerReducer'\nimport { setZoom } from '../reducers/zoomReducer'\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap'\nimport distance from '../helpers'\n\nconst Sidebar = ({\n  closeSidebar,\n  showSidebar,\n  trams,\n  showTrams,\n  setShowTrams,\n  setCenter,\n  setZoom,\n  stops,\n  myStop,\n  setMyStop,\n}) => {\n \n  \n  const style = showSidebar ? { width: '400px' } : { width: '0' }\n\n  const handleShowMyTram = e => {\n    console.log('TRAM CHOSEN: ', e.target.value)\n    let chosenTram = trams.find(\n      tram => tram.VP.veh.toString() === e.target.value\n    )\n    console.log('chosen Tram:', chosenTram)\n    //setShowTrams(showTrams.concat(chosenTram))\n    setShowTrams([chosenTram])\n    setCenter({ lat: chosenTram.VP.lat, lng: chosenTram.VP.long })\n    setZoom(16)\n  }\n\n  const handleShowLine = e => {\n    console.log('LINE CHOSEN: ', e.target.value)\n    setShowTrams(trams.filter(tram => parseInt(tram.VP.desi) == e.target.value))\n    setZoom(13)\n  }\n\n  const handleChooseStop = e => {\n    console.log('STOP CHOSEN: ', e.target.value)\n    setMyStop(stops.find(stop => stop.gtfsId === e.target.value))\n  }\n\n  /// COMPARE FUNCTION FOR ARRAY SORT()\n  const sortByLineNumbers = (a, b) => {\n    return parseInt(a.VP.desi) < parseInt(b.VP.desi)\n      ? -1\n      : parseInt(a.VP.desi) > parseInt(b.VP.desi)\n        ? 1\n        : 0\n  }\n  let tramsInOrder = [...trams]\n  tramsInOrder.sort(sortByLineNumbers)\n\n  const sortLineNumbers = (a, b) => {\n    return parseInt(a) < parseInt(b) ? -1 : parseInt(a) > parseInt(b) ? 1 : 0\n  }\n  const lineNumbers = []\n  trams.forEach(tram => {\n    if (!lineNumbers.includes(parseInt(tram.VP.desi))) {\n      lineNumbers.push(parseInt(tram.VP.desi))\n    }\n  })\n  lineNumbers.sort(sortLineNumbers)\n\n  if (trams.VP){\n    const myTramsPosition = {lat:trams[0].VP.lat, lon: trams[0].VP.long}\n    console.log('MY TRAM: ',myTramsPosition)\n  }\n  \n\n  return (\n    <div style={style} className='sidebar' id='mySidebar'>\n      <a\n        href='javascript:void(0)'\n        className='closebtn'\n        onClick={() => closeSidebar()}\n      >\n        â˜°\n      </a>\n      <Container>\n        <Form>\n          <Row>\n            <Col sm={6}>\n              <Button\n                onClick={() => { setShowTrams(trams); setZoom(13) }}\n                variant='outline-secondary'\n              >\n                show all trams\n              </Button>\n            </Col>\n            <Col sm={5}>\n              <Button\n                onClick={() => setShowTrams([])}\n                variant='outline-secondary'\n              >\n                hide all trams\n              </Button>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={6}>\n              <Form.Group controlId='exampleForm.ControlSelect2'>\n                <Form.Label>Find my tram</Form.Label>\n                <Form.Control as='select' onChange={handleShowMyTram}> \n                  {tramsInOrder.map((tram, i) => (\n                    <option key={i} value={tram.VP.veh}>\n                      line: {tram.VP.desi} veh:{tram.VP.veh}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n            <Col sm={3}>\n              <Form.Group controlId='exampleForm.ControlSelect1'>\n                <Form.Label>Show line</Form.Label>\n                <Form.Control as='select' onChange={handleShowLine}> \n                  {lineNumbers.map((line, i) => (\n                    <option key={i} value={line}>\n                      {line}\n                    </option>\n                  ))}\n                </Form.Control> \n              </Form.Group>\n            </Col>\n          </Row>\n          <Row>\n            <Col sm={5}>\n              <Form.Group controlId='exampleForm.ControlSelect1'>\n                <Form.Label>Closest stops</Form.Label>\n                <Form.Control as='select' onChange={handleChooseStop}> \n                    {stops.map(stop => \n                    <option key={stop.id} value={stop.gtfsId}>\n                      {stop.name} {stop.gtfsId}\n                    </option>\n                  )}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n            <Col sm={5}>\n            <Form.Group controlId='exampleForm.ControlSelect1'>\n            <Form.Label>My stop : {myStop  && `${myStop.name} ${myStop.gtfsId}`}</Form.Label>\n            </Form.Group>\n          </Col>\n          </Row>\n           <Row>\n            {showTrams[0] && <Col>distance from myTram to myStop: {distance(myStop.lat,myStop.lon,showTrams[0].VP.lat,showTrams[0].VP.long)}</Col>}\n          </Row> \n            \n          {/*  <Row>\n            <Col sm={5}>\n              <Form.Group>\n                <Form.Check\n                  type='radio'\n                  label='All times'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios1'\n                />\n                <Form.Check\n                  type='radio'\n                  label='today'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios2'\n                />\n                <Form.Check\n                  type='radio'\n                  label='this week'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios3'\n                />\n              </Form.Group>\n            </Col>   \n          </Row> */}\n\n        </Form>\n      </Container>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    trams: state.trams,\n    showTrams: state.showTrams,\n    showSidebar: state.showSidebar,\n    stops: state.stops,\n    myStop: state.myStop,\n  }\n}\n\nconst mapDispatchToProps = {\n  setShowTrams, setMyStop, setCenter, setZoom\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Sidebar)\n"]},"metadata":{},"sourceType":"module"}