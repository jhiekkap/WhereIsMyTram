{"ast":null,"code":"import _slicedToArray from \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/components/Sidebar.js\";\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { setShowTrams } from '../reducers/showTramsReducer';\nimport { setMyStop } from '../reducers/myStopReducer';\nimport { setCenter } from '../reducers/centerReducer';\nimport { setZoom } from '../reducers/zoomReducer';\nimport { setMyTram } from '../reducers/myTramReducer';\nimport { Container, Row, Col, Form, Button, Dropdown } from 'react-bootstrap';\nimport distance, { sortByVehicleNumbers, sortLineNumbers, sortStopNames } from '../utils/helpers';\nimport { get } from 'https';\n\nconst Sidebar = ({\n  closeSidebar,\n  showSidebar,\n  trams,\n  //showTrams,\n  setShowTrams,\n  setCenter,\n  setZoom,\n  stops,\n  myStop,\n  setMyStop,\n  myTram,\n  setMyTram\n}) => {\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        line = _useState2[0],\n        setLine = _useState2[1];\n\n  const style = showSidebar ? {\n    width: '250px'\n  } : {\n    width: '0'\n  };\n\n  const handleChooseMyTram = veh => {\n    console.log('TRAM CHOSEN: ', veh);\n\n    if (veh !== 'reset') {\n      let chosenTram = trams.find(tram => tram.VP.veh == veh);\n      console.log('chosen Tram:', chosenTram);\n      setMyTram(chosenTram);\n      setShowTrams([]);\n      setCenter({\n        lat: chosenTram.VP.lat,\n        lng: chosenTram.VP.long\n      }); //setZoom(16)\n    } else {\n      setMyTram('');\n      setLine(0);\n    }\n  };\n\n  const handleShowLine = line => {\n    console.log('LINE CHOSEN: ', line);\n    setShowTrams(trams.filter(tram => parseInt(tram.VP.desi) == line));\n    setZoom(13);\n  };\n\n  const handleChooseStop = stopsGtfsId => {\n    console.log('STOP CHOSEN: ', stopsGtfsId);\n    setMyStop(stops.find(stop => stop.gtfsId === stopsGtfsId));\n  };\n\n  const getTrams = () => {\n    return [...trams];\n  };\n\n  const handleSetAlarm = () => {\n    console.log('ALARM SET');\n    setInterval(() => {\n      let upDatedTrams = getTrams();\n      console.log('DISTANCE NOW: ', distance(myStop.lat, myStop.lon, upDatedTrams.find(tram => tram.VP.veh === myTram.VP.veh).VP.lat, upDatedTrams.find(tram => tram.VP.veh === myTram.VP.veh).VP.long), new Date());\n    }, 500);\n  };\n\n  let tramsInOrder = [...trams];\n  tramsInOrder.sort(sortByVehicleNumbers);\n  const lineNumbers = [];\n  trams.forEach(tram => {\n    if (!lineNumbers.includes(parseInt(tram.VP.desi))) {\n      lineNumbers.push(parseInt(tram.VP.desi));\n    }\n  });\n  lineNumbers.sort(sortLineNumbers);\n  const stopsInOrder = [...stops];\n  stopsInOrder.sort(sortStopNames);\n  return React.createElement(\"div\", {\n    style: style,\n    className: \"sidebar\",\n    id: \"mySidebar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(Dropdown, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(Dropdown.Toggle, {\n    variant: \"success\",\n    id: \"dropdown-basic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, !myStop ? 'CHOOSE STOP' : myStop.name + ' ' + myStop.gtfsId), React.createElement(Dropdown.Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, stopsInOrder.map((stop, i) => React.createElement(Dropdown.Item, {\n    key: i,\n    onClick: () => handleChooseStop(stop.gtfsId),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, stop.name, \" \", stop.gtfsId)))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Dropdown\n  /* id='tramDropdown' */\n  , {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(Dropdown.Toggle, {\n    variant: \"success\",\n    id: \"dropdown-basic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, line > 0 ? 'Line: ' + line : 'Line?'), React.createElement(Dropdown.Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, lineNumbers.map((line, i) => React.createElement(Dropdown.Item, {\n    key: i,\n    onClick: () => setLine(line),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, line))))), React.createElement(Col, {\n    xs: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(Dropdown\n  /* id='tramDropdown' */\n  , {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(Dropdown.Toggle, {\n    variant: \"success\",\n    id: \"dropdown-basic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, myTram.VP ? 'Vehicle: ' + myTram.VP.veh : 'Vehicle?'), React.createElement(Dropdown.Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, myTram.VP ? React.createElement(Dropdown.Item, {\n    onClick: () => handleChooseMyTram('reset'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"reset\") : React.createElement(Dropdown.Item, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"choose line\"), tramsInOrder.filter(tram => tram.VP.desi == line).map((tram, i) => React.createElement(Dropdown.Item, {\n    key: i,\n    onClick: () => handleChooseMyTram(tram.VP.veh),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, tram.VP.veh)))))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, myTram.VP && myStop && React.createElement(Col, {\n    xs: \"auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"Distance:\", ' ', distance(myStop.lat, myStop.lon, trams.find(tram => tram.VP.veh === myTram.VP.veh).VP.lat, trams.find(tram => tram.VP.veh === myTram.VP.veh).VP.long), ' ', \"m\")), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => {\n      setShowTrams(trams);\n      setZoom(13);\n      closeSidebar();\n    },\n    variant: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"show all trams\"))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: () => setShowTrams([]),\n    variant: \"success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \"hide all trams\"))), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(Dropdown\n  /* id='tramDropdown' */\n  , {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(Dropdown.Toggle, {\n    variant: \"success\",\n    id: \"dropdown-basic\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \"Show Line\"), React.createElement(Dropdown.Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, lineNumbers.map((line, i) => React.createElement(Dropdown.Item, {\n    key: i,\n    onClick: () => handleShowLine(line),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, line)))))), myTram.VP && React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: handleSetAlarm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, \"Set Alarm\"))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    trams: state.trams,\n    //showTrams: state.showTrams,\n    showSidebar: state.showSidebar,\n    stops: state.stops,\n    myStop: state.myStop,\n    myTram: state.myTram\n  };\n};\n\nconst mapDispatchToProps = {\n  setShowTrams,\n  setMyStop,\n  setCenter,\n  setZoom,\n  setMyTram\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n{\n  /* \n        <Form>\n          <Row>\n            <Col xs='auto'>\n              <Form.Group controlId='exampleForm.ControlSelect3'>\n                <Form.Label>My stop</Form.Label>\n                <Form.Control\n                  as='select'\n                  onChange={handleChooseStop}\n                  value={myStop.gtfsId}\n                >\n                  <option> - </option>\n                  {stopsInOrder.map((stop, i) => (\n                    <option key={i} value={stop.gtfsId}>\n                      {stop.name} {stop.gtfsId}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <Form.Group controlId='exampleForm.ControlSelect1'>\n                <Form.Label>Choose tram</Form.Label>\n                <Form.Control as='select' onChange={handleChooseMyTram}>\n                  {!myTram.VP ? (\n                    <option> - </option>\n                  ) : (\n                    <option value='reset'>reset</option>\n                  )}\n                  {tramsInOrder.map((tram, i) => (\n                    <option key={i} value={tram.VP.veh}>\n                      line: {tram.VP.desi} veh:{tram.VP.veh}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n          </Row>\n             <Row>\n            <Col sm={5}>\n              <Form.Group>\n                <Form.Check\n                  type='radio'\n                  label='All times'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios1'\n                />\n                <Form.Check\n                  type='radio'\n                  label='today'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios2'\n                />\n                <Form.Check\n                  type='radio'\n                  label='this week'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios3'\n                />\n              </Form.Group>\n            </Col>   \n          </Row> \n          <Row>\n          <Col>\n            <Form.Group controlId='exampleForm.ControlSelect2'>\n              <Form.Label>Show line</Form.Label>\n              <Form.Control as='select' onChange={handleShowLine}>\n                <option> - </option>\n                {lineNumbers.map((line, i) => (\n                  <option key={i} value={line}>\n                    {line}\n                  </option>\n                ))}\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row> \n        </Form> */\n}","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/ui/src/components/Sidebar.js"],"names":["React","useState","connect","setShowTrams","setMyStop","setCenter","setZoom","setMyTram","Container","Row","Col","Form","Button","Dropdown","distance","sortByVehicleNumbers","sortLineNumbers","sortStopNames","get","Sidebar","closeSidebar","showSidebar","trams","stops","myStop","myTram","line","setLine","style","width","handleChooseMyTram","veh","console","log","chosenTram","find","tram","VP","lat","lng","long","handleShowLine","filter","parseInt","desi","handleChooseStop","stopsGtfsId","stop","gtfsId","getTrams","handleSetAlarm","setInterval","upDatedTrams","lon","Date","tramsInOrder","sort","lineNumbers","forEach","includes","push","stopsInOrder","name","map","i","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { connect } from 'react-redux'\nimport { setShowTrams } from '../reducers/showTramsReducer'\nimport { setMyStop } from '../reducers/myStopReducer'\nimport { setCenter } from '../reducers/centerReducer'\nimport { setZoom } from '../reducers/zoomReducer'\nimport { setMyTram } from '../reducers/myTramReducer'\nimport { Container, Row, Col, Form, Button, Dropdown } from 'react-bootstrap'\nimport distance, {\n  sortByVehicleNumbers,\n  sortLineNumbers,\n  sortStopNames,\n} from '../utils/helpers'\nimport { get } from 'https';\n\nconst Sidebar = ({\n  closeSidebar,\n  showSidebar,\n  trams,\n  //showTrams,\n  setShowTrams,\n  setCenter,\n  setZoom,\n  stops,\n  myStop,\n  setMyStop,\n  myTram,\n  setMyTram,\n}) => {\n  const [line, setLine] = useState(0)\n\n  const style = showSidebar ? { width: '250px' } : { width: '0' }\n\n  const handleChooseMyTram = veh => {\n    console.log('TRAM CHOSEN: ', veh)\n    if (veh !== 'reset') {\n      let chosenTram = trams.find(tram => tram.VP.veh == veh)\n      console.log('chosen Tram:', chosenTram)\n      setMyTram(chosenTram)\n      setShowTrams([])\n      setCenter({ lat: chosenTram.VP.lat, lng: chosenTram.VP.long })\n      //setZoom(16)\n    } else {\n      setMyTram('')\n      setLine(0)\n    }\n  }\n\n  const handleShowLine = line => {\n    console.log('LINE CHOSEN: ', line)\n    setShowTrams(trams.filter(tram => parseInt(tram.VP.desi) == line))\n    setZoom(13)\n  }\n\n  const handleChooseStop = stopsGtfsId => {\n    console.log('STOP CHOSEN: ', stopsGtfsId)\n    setMyStop(stops.find(stop => stop.gtfsId === stopsGtfsId))\n  }\n const getTrams = () => {\n   return [...trams]\n }\n\n  const handleSetAlarm = () => {\n    console.log('ALARM SET')\n    setInterval(()=> {\n        let upDatedTrams = getTrams()\n        console.log('DISTANCE NOW: ', distance(\n          myStop.lat,\n          myStop.lon,\n          upDatedTrams.find(tram => tram.VP.veh === myTram.VP.veh).VP.lat,\n          upDatedTrams.find(tram => tram.VP.veh === myTram.VP.veh).VP.long\n        ), new Date())\n    }, 500)\n  }\n\n  let tramsInOrder = [...trams]\n  tramsInOrder.sort(sortByVehicleNumbers)\n\n  const lineNumbers = []\n  trams.forEach(tram => {\n    if (!lineNumbers.includes(parseInt(tram.VP.desi))) {\n      lineNumbers.push(parseInt(tram.VP.desi))\n    }\n  })\n  lineNumbers.sort(sortLineNumbers)\n\n  const stopsInOrder = [...stops]\n  stopsInOrder.sort(sortStopNames)\n\n  return (\n    <div style={style} className='sidebar' id='mySidebar'>\n      <Container>\n        <Row>\n          <Col xs={12}>\n            <Dropdown>\n              <Dropdown.Toggle variant='success' id='dropdown-basic'>\n                {!myStop ? 'CHOOSE STOP' : myStop.name + ' ' + myStop.gtfsId}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {stopsInOrder.map((stop, i) => (\n                  <Dropdown.Item\n                    key={i}\n                    onClick={() => handleChooseStop(stop.gtfsId)}\n                  >\n                    {stop.name} {stop.gtfsId}\n                  </Dropdown.Item>\n                ))}\n              </Dropdown.Menu>\n            </Dropdown>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col xs={6}>\n            <Dropdown /* id='tramDropdown' */>\n              <Dropdown.Toggle variant='success' id='dropdown-basic'>\n                {line > 0 ? 'Line: ' + line : 'Line?'}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {lineNumbers.map((line, i) => (\n                  <Dropdown.Item key={i} onClick={() => setLine(line)}>\n                    {line}\n                  </Dropdown.Item>\n                ))}\n              </Dropdown.Menu>\n            </Dropdown>\n          </Col>\n          <Col xs={6}>\n            <Dropdown /* id='tramDropdown' */>\n              <Dropdown.Toggle variant='success' id='dropdown-basic'>\n                {myTram.VP ? 'Vehicle: ' + myTram.VP.veh : 'Vehicle?'}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {myTram.VP ? \n                  <Dropdown.Item onClick={() => handleChooseMyTram('reset')}>\n                    reset\n                  </Dropdown.Item> \n                  : <Dropdown.Item>\n                  choose line\n                </Dropdown.Item>\n                }\n                {tramsInOrder\n                  .filter(tram => tram.VP.desi == line)\n                  .map((tram, i) => (\n                    <Dropdown.Item\n                      key={i}\n                      onClick={() => handleChooseMyTram(tram.VP.veh)}\n                    >\n                      {tram.VP.veh}\n                    </Dropdown.Item>\n                  ))}\n              </Dropdown.Menu>\n            </Dropdown>\n          </Col>\n        </Row>\n\n        <Row>\n          {myTram.VP && myStop && (\n            <Col xs='auto'>\n              Distance:{' '}\n              {distance(\n                myStop.lat,\n                myStop.lon,\n                trams.find(tram => tram.VP.veh === myTram.VP.veh).VP.lat,\n                trams.find(tram => tram.VP.veh === myTram.VP.veh).VP.long\n              )}{' '}\n             m\n            </Col>\n          )}\n        </Row>\n\n        <Row>\n          <Col>\n            <Button\n              onClick={() => {\n                setShowTrams(trams)\n                setZoom(13)\n                closeSidebar()\n              }}\n              variant='success'\n            >\n              show all trams\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n            <Button\n              onClick={() => setShowTrams([])}\n              variant='success'\n            >\n              hide all trams\n            </Button>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col>\n            <Dropdown /* id='tramDropdown' */>\n              <Dropdown.Toggle variant='success' id='dropdown-basic'>\n                Show Line\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                {lineNumbers.map((line, i) => (\n                  <Dropdown.Item key={i} onClick={() => handleShowLine(line)}>\n                    {line}\n                  </Dropdown.Item>\n                ))}\n              </Dropdown.Menu>\n            </Dropdown>\n          </Col>\n        </Row>\n        {myTram.VP && <Row>\n          <Button onClick={handleSetAlarm}>Set Alarm</Button>\n        </Row>}\n      </Container>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => {\n  return {\n    trams: state.trams,\n    //showTrams: state.showTrams,\n    showSidebar: state.showSidebar,\n    stops: state.stops,\n    myStop: state.myStop,\n    myTram: state.myTram,\n  }\n}\n\nconst mapDispatchToProps = {\n  setShowTrams,\n  setMyStop,\n  setCenter,\n  setZoom,\n  setMyTram,\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Sidebar)\n\n{\n  /* \n        <Form>\n          <Row>\n            <Col xs='auto'>\n              <Form.Group controlId='exampleForm.ControlSelect3'>\n                <Form.Label>My stop</Form.Label>\n                <Form.Control\n                  as='select'\n                  onChange={handleChooseStop}\n                  value={myStop.gtfsId}\n                >\n                  <option> - </option>\n                  {stopsInOrder.map((stop, i) => (\n                    <option key={i} value={stop.gtfsId}>\n                      {stop.name} {stop.gtfsId}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <Form.Group controlId='exampleForm.ControlSelect1'>\n                <Form.Label>Choose tram</Form.Label>\n                <Form.Control as='select' onChange={handleChooseMyTram}>\n                  {!myTram.VP ? (\n                    <option> - </option>\n                  ) : (\n                    <option value='reset'>reset</option>\n                  )}\n                  {tramsInOrder.map((tram, i) => (\n                    <option key={i} value={tram.VP.veh}>\n                      line: {tram.VP.desi} veh:{tram.VP.veh}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Form.Group>\n            </Col>\n          </Row>\n \n           <Row>\n            <Col sm={5}>\n              <Form.Group>\n                <Form.Check\n                  type='radio'\n                  label='All times'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios1'\n                />\n                <Form.Check\n                  type='radio'\n                  label='today'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios2'\n                />\n                <Form.Check\n                  type='radio'\n                  label='this week'\n                  name='formHorizontalRadios'\n                  id='formHorizontalRadios3'\n                />\n              </Form.Group>\n            </Col>   \n          </Row> \n          <Row>\n          <Col>\n            <Form.Group controlId='exampleForm.ControlSelect2'>\n              <Form.Label>Show line</Form.Label>\n              <Form.Control as='select' onChange={handleShowLine}>\n                <option> - </option>\n                {lineNumbers.map((line, i) => (\n                  <option key={i} value={line}>\n                    {line}\n                  </option>\n                ))}\n              </Form.Control>\n            </Form.Group>\n          </Col>\n        </Row> \n        </Form> */\n}\n"]},"metadata":{},"sourceType":"module"}