{"ast":null,"code":"var _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/SelectTram.js\";\nimport React from 'react';\nimport { subscribe } from 'mqtt-react';\n\nconst SelectTram = props => {\n  const trams = props.trams,\n        setTrams = props.setTrams,\n        showTram = props.showTram,\n        setShowTram = props.setShowTram;\n\n  const handleChooseTram = e => {\n    console.log('TRAM CHOSEN: ', e.target.value);\n    console.log('TRAMS: ', trams);\n    let chosenTram = trams.find(tram => tram.veh == e.target.value);\n    console.log('chosen Tram:', chosenTram);\n    setShowTram(chosenTram);\n  };\n\n  let newData = props.data[0];\n\n  if (newData) {\n    let VP = newData.VP; //console.log(new Date())\n\n    if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      //console.log(new Date(), 'trams: ', trams.length)\n      setTrams(trams.concat({\n        linja: VP.desi,\n        veh: VP.veh,\n        lat: VP.lat,\n        long: VP.long\n      }));\n    }\n    /* else {\n    //console.log('hep', new Date())\n     let newTrams =  \n      trams.map(tram => tram.veh === VP.veh ? {\n        linja: VP.desi,\n        veh: VP.veh,\n        lat: VP.lat,\n        long: VP.long,\n      }: tram) \n      //console.log(newTrams)\n      setTrams(newTrams) \n    }  */\n\n  }\n\n  if (newData && showTram.veh === newData.VP.veh) {\n    let VP = newData.VP;\n    setShowTram({\n      linja: VP.desi,\n      veh: VP.veh,\n      lat: VP.lat,\n      long: VP.long\n    });\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"valitse ratikka:\"), React.createElement(\"select\", {\n    onChange: handleChooseTram,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, trams.map((tram, i) => React.createElement(\"option\", {\n    key: i,\n    value: tram.veh,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"linja: \", tram.linja, \" veh: \", tram.veh))));\n};\n\nexport default subscribe({\n  topic: '/hfp/v2/journey/ongoing/vp/tram/#'\n})(SelectTram);","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/SelectTram.js"],"names":["React","subscribe","SelectTram","props","trams","setTrams","showTram","setShowTram","handleChooseTram","e","console","log","target","value","chosenTram","find","tram","veh","newData","data","VP","map","includes","concat","linja","desi","lat","long","i","topic"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,YAA1B;;AAEA,MAAMC,UAAU,GAAGC,KAAK,IAAI;AAAA,QAClBC,KADkB,GACyBD,KADzB,CAClBC,KADkB;AAAA,QACXC,QADW,GACyBF,KADzB,CACXE,QADW;AAAA,QACDC,QADC,GACyBH,KADzB,CACDG,QADC;AAAA,QACSC,WADT,GACyBJ,KADzB,CACSI,WADT;;AAG1B,QAAMC,gBAAgB,GAAGC,CAAC,IAAI;AAC5BC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,CAAC,CAACG,MAAF,CAASC,KAAtC;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBP,KAAvB;AACA,QAAIU,UAAU,GAAGV,KAAK,CAACW,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,GAAL,IAAYR,CAAC,CAACG,MAAF,CAASC,KAAxC,CAAjB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BG,UAA5B;AACAP,IAAAA,WAAW,CAACO,UAAD,CAAX;AACD,GAND;;AAQA,MAAII,OAAO,GAAGf,KAAK,CAACgB,IAAN,CAAW,CAAX,CAAd;;AAEA,MAAID,OAAJ,EAAa;AACX,QAAIE,EAAE,GAAGF,OAAO,CAACE,EAAjB,CADW,CAEX;;AACA,QAAI,CAAChB,KAAK,CAACiB,GAAN,CAAUL,IAAI,IAAIA,IAAI,CAACC,GAAvB,EAA4BK,QAA5B,CAAqCF,EAAE,CAACH,GAAxC,CAAL,EAAmD;AACjD;AACAZ,MAAAA,QAAQ,CACND,KAAK,CAACmB,MAAN,CAAa;AACXC,QAAAA,KAAK,EAAEJ,EAAE,CAACK,IADC;AAEXR,QAAAA,GAAG,EAAEG,EAAE,CAACH,GAFG;AAGXS,QAAAA,GAAG,EAAEN,EAAE,CAACM,GAHG;AAIXC,QAAAA,IAAI,EAAEP,EAAE,CAACO;AAJE,OAAb,CADM,CAAR;AAQD;AAAC;;;;;;;;;;;;;AAYH;;AACD,MAAIT,OAAO,IAAKZ,QAAQ,CAACW,GAAT,KAAiBC,OAAO,CAACE,EAAR,CAAWH,GAA5C,EAAkD;AAChD,QAAIG,EAAE,GAAGF,OAAO,CAACE,EAAjB;AACAb,IAAAA,WAAW,CAAC;AACViB,MAAAA,KAAK,EAAEJ,EAAE,CAACK,IADA;AAEVR,MAAAA,GAAG,EAAEG,EAAE,CAACH,GAFE;AAGVS,MAAAA,GAAG,EAAEN,EAAE,CAACM,GAHE;AAIVC,MAAAA,IAAI,EAAEP,EAAE,CAACO;AAJC,KAAD,CAAX;AAMD;;AAED,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AAAQ,IAAA,QAAQ,EAAEnB,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,KAAK,CAACiB,GAAN,CAAU,CAACL,IAAD,EAAOY,CAAP,KACT;AAAQ,IAAA,GAAG,EAAEA,CAAb;AAAgB,IAAA,KAAK,EAAEZ,IAAI,CAACC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACUD,IAAI,CAACQ,KADf,YAC4BR,IAAI,CAACC,GADjC,CADD,CADH,CAFF,CADF;AAYD,CA7DD;;AA+DA,eAAehB,SAAS,CAAC;AACvB4B,EAAAA,KAAK,EAAE;AADgB,CAAD,CAAT,CAEZ3B,UAFY,CAAf","sourcesContent":["import React from 'react'\nimport { subscribe } from 'mqtt-react'\n\nconst SelectTram = props => {\n  const { trams, setTrams, showTram, setShowTram } = props\n\n  const handleChooseTram = e => {\n    console.log('TRAM CHOSEN: ', e.target.value)\n    console.log('TRAMS: ', trams)\n    let chosenTram = trams.find(tram => tram.veh == e.target.value)\n    console.log('chosen Tram:', chosenTram)\n    setShowTram(chosenTram)\n  }\n\n  let newData = props.data[0]\n\n  if (newData) {\n    let VP = newData.VP\n    //console.log(new Date())\n    if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      //console.log(new Date(), 'trams: ', trams.length)\n      setTrams(\n        trams.concat({\n          linja: VP.desi,\n          veh: VP.veh,\n          lat: VP.lat,\n          long: VP.long,\n        })\n      )\n    } /* else {\n      //console.log('hep', new Date())\n       let newTrams =  \n        trams.map(tram => tram.veh === VP.veh ? {\n          linja: VP.desi,\n          veh: VP.veh,\n          lat: VP.lat,\n          long: VP.long,\n        }: tram) \n        //console.log(newTrams)\n        setTrams(newTrams) \n    }  */\n  }\n  if (newData && (showTram.veh === newData.VP.veh)) {\n    let VP = newData.VP\n    setShowTram({\n      linja: VP.desi,\n      veh: VP.veh,\n      lat: VP.lat,\n      long: VP.long,\n    })\n  }\n\n  return (\n    <div>\n      <p>valitse ratikka:</p>\n      <select onChange={handleChooseTram}>\n        {trams.map((tram, i) => (\n          <option key={i} value={tram.veh}>\n            linja: {tram.linja} veh: {tram.veh}\n          </option>\n        ))}\n      </select>\n    </div>\n  )\n}\n\nexport default subscribe({\n  topic: '/hfp/v2/journey/ongoing/vp/tram/#',\n})(SelectTram)\n"]},"metadata":{},"sourceType":"module"}