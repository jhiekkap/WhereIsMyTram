{"ast":null,"code":"import _slicedToArray from \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/LeafletMap.js\";\nimport React, { useState } from 'react';\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet';\nimport { subscribe } from 'mqtt-react';\nconst mapInitialCenter = {\n  lat: 60.19501135150039,\n  lng: 24.943557594049953\n};\n\nconst LeafletMap = props => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        trams = _useState2[0],\n        setTrams = _useState2[1]; //const [showTrams, setShowTrams] = useState([])\n\n\n  let newData = props.data[0];\n\n  if (newData) {\n    let VP = newData.VP;\n\n    if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      setTrams(trams.concat({\n        linja: VP.desi,\n        veh: VP.veh,\n        lat: VP.lat,\n        long: VP.long\n      }));\n    }\n  } //console.log(trams)\n  //console.log(newData)\n\n\n  const MarkerFactory = () => {\n    return trams.map(tram => React.createElement(Marker, {\n      key: tram.veh,\n      position: {\n        lat: tram.lat,\n        lng: tram.long\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      closeButton: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, tram.linja)));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(Map, {\n    id: \"mapid\",\n    center: mapInitialCenter,\n    zoom: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(TileLayer, {\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    attribution: \"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(Marker, {\n    position: mapInitialCenter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Popup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"A pretty CSS3 popup.\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), \"Easily customizable.\")), MarkerFactory()));\n};\n\nexport default subscribe({\n  topic: '/hfp/v2/journey/ongoing/vp/tram/#'\n})(LeafletMap);","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/LeafletMap.js"],"names":["React","useState","Map","Marker","Popup","TileLayer","subscribe","mapInitialCenter","lat","lng","LeafletMap","props","trams","setTrams","newData","data","VP","map","tram","veh","includes","concat","linja","desi","long","MarkerFactory","topic"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,GAAT,EAAcC,MAAd,EAAsBC,KAAtB,EAA6BC,SAA7B,QAA8C,eAA9C;AACA,SAASC,SAAT,QAA0B,YAA1B;AAGA,MAAMC,gBAAgB,GAAG;AAAEC,EAAAA,GAAG,EAAE,iBAAP;AAA0BC,EAAAA,GAAG,EAAE;AAA/B,CAAzB;;AAIA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAAA,oBAEFV,QAAQ,CAAC,EAAD,CAFN;AAAA;AAAA,QAErBW,KAFqB;AAAA,QAEdC,QAFc,kBAG5B;;;AAKA,MAAIC,OAAO,GAAGH,KAAK,CAACI,IAAN,CAAW,CAAX,CAAd;;AACA,MAAID,OAAJ,EAAa;AAEX,QAAIE,EAAE,GAAGF,OAAO,CAACE,EAAjB;;AAIE,QAAI,CAACJ,KAAK,CAACK,GAAN,CAAUC,IAAI,IAAIA,IAAI,CAACC,GAAvB,EAA4BC,QAA5B,CAAqCJ,EAAE,CAACG,GAAxC,CAAL,EAAmD;AACnDN,MAAAA,QAAQ,CAACD,KAAK,CAACS,MAAN,CACP;AACEC,QAAAA,KAAK,EAAEN,EAAE,CAACO,IADZ;AAEEJ,QAAAA,GAAG,EAAEH,EAAE,CAACG,GAFV;AAGEX,QAAAA,GAAG,EAAEQ,EAAE,CAACR,GAHV;AAIEgB,QAAAA,IAAI,EAAER,EAAE,CAACQ;AAJX,OADO,CAAD,CAAR;AASD;AACF,GA1B2B,CA4B5B;AACA;;;AAEA,QAAMC,aAAa,GAAG,MAAM;AAC1B,WACEb,KAAK,CAACK,GAAN,CAAUC,IAAI,IACZ,oBAAC,MAAD;AACE,MAAA,GAAG,EAAEA,IAAI,CAACC,GADZ;AAEE,MAAA,QAAQ,EAAE;AACRX,QAAAA,GAAG,EAAEU,IAAI,CAACV,GADF;AAERC,QAAAA,GAAG,EAAES,IAAI,CAACM;AAFF,OAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOE,oBAAC,KAAD;AAAO,MAAA,WAAW,EAAE,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGN,IAAI,CAACI,KADR,CAPF,CADF,CADF;AAgBD,GAjBD;;AAoBA,SACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAC,OAAR;AAAgB,IAAA,MAAM,EAAEf,gBAAxB;AAA0C,IAAA,IAAI,EAAE,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AACE,IAAA,GAAG,EAAC,oDADN;AAEE,IAAA,WAAW,EAAC,0EAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEA,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA3B,yBADF,CALF,EAQGkB,aAAa,EARhB,CADF,CADF;AAcD,CAjED;;AAmEA,eAAenB,SAAS,CAAC;AACvBoB,EAAAA,KAAK,EAAE;AADgB,CAAD,CAAT,CAEZhB,UAFY,CAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Map, Marker, Popup, TileLayer } from 'react-leaflet'\nimport { subscribe } from 'mqtt-react'\n\n\nconst mapInitialCenter = { lat: 60.19501135150039, lng: 24.943557594049953 }\n\n\n\nconst LeafletMap = (props) => {\n\n  const [trams, setTrams] = useState([])\n  //const [showTrams, setShowTrams] = useState([])\n\n \n\n\n  let newData = props.data[0]\n  if (newData) {\n\n    let VP = newData.VP\n\n       \n     \n      if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      setTrams(trams.concat(\n        {\n          linja: VP.desi,\n          veh: VP.veh,\n          lat: VP.lat,\n          long: VP.long\n        }\n      )) \n\n    }  \n  }\n\n  //console.log(trams)\n  //console.log(newData)\n\n  const MarkerFactory = () => {\n    return (\n      trams.map(tram =>\n        <Marker\n          key={tram.veh}\n          position={{\n            lat: tram.lat,\n            lng: tram.long\n          }}\n        >\n          <Popup closeButton={false}>\n            {tram.linja}\n          </Popup>\n        </Marker>\n      )\n\n    )\n  }\n\n\n  return (\n    <div className=\"App\">\n      <Map id=\"mapid\" center={mapInitialCenter} zoom={12}>\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution=\"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\n        />\n        <Marker position={mapInitialCenter}>\n          <Popup>A pretty CSS3 popup.<br />Easily customizable.</Popup>\n        </Marker>\n        {MarkerFactory()}\n      </Map>\n    </div>\n  );\n}\n\nexport default subscribe({\n  topic: '/hfp/v2/journey/ongoing/vp/tram/#'\n})(LeafletMap)\n"]},"metadata":{},"sourceType":"module"}