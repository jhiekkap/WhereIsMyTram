{"ast":null,"code":"var _jsxFileName = \"/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/SelectTram.js\";\nimport React from 'react';\nimport { subscribe } from 'mqtt-react';\n\nconst SelectTram = props => {\n  const handleChooseTram = e => {\n    console.log('TRAM CHOSEN: ', e.target.value);\n    console.log('TRAMS: ', trams);\n    let chosenTram = trams.find(tram => tram.veh == e.target.value);\n    console.log(chosenTram);\n    setShowTram(chosenTram);\n  };\n\n  let newData = props.data[0];\n\n  if (newData) {\n    let VP = newData.VP; //console.log(new Date())\n\n    if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      //console.log(new Date(), 'trams: ', trams.length)\n      setTrams(trams.concat({\n        linja: VP.desi,\n        veh: VP.veh,\n        lat: VP.lat,\n        long: VP.long\n      }));\n    }\n    /* else {\n    //console.log('hep', new Date())\n     let newTrams =  \n      trams.map(tram => tram.veh === VP.veh ? {\n        linja: VP.desi,\n        veh: VP.veh,\n        lat: VP.lat,\n        long: VP.long,\n      }: tram) \n      //console.log(newTrams)\n      setTrams(newTrams) \n    }  */\n\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"valitse ratikka:\"), React.createElement(\"select\", {\n    onChange: handleChooseTram,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, trams.map((tram, i) => React.createElement(\"option\", {\n    key: i,\n    value: tram.veh,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"linja: \", tram.linja, \" veh: \", tram.veh))));\n};\n\nexport default subscribe({\n  topic: '/hfp/v2/journey/ongoing/vp/tram/#'\n})(SelectTram);","map":{"version":3,"sources":["/Users/jarihiekkapelto/Desktop/MOOC/harjoitusTyoFullStack19/mytram/src/SelectTram.js"],"names":["React","subscribe","SelectTram","props","handleChooseTram","e","console","log","target","value","trams","chosenTram","find","tram","veh","setShowTram","newData","data","VP","map","includes","setTrams","concat","linja","desi","lat","long","i","topic"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,YAA1B;;AAGA,MAAMC,UAAU,GAAIC,KAAD,IAAW;AAG1B,QAAMC,gBAAgB,GAAGC,CAAC,IAAI;AAC1BC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,CAAC,CAACG,MAAF,CAASC,KAAtC;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBG,KAAvB;AACA,QAAIC,UAAU,GAAGD,KAAK,CAACE,IAAN,CAAWC,IAAI,IAAIA,IAAI,CAACC,GAAL,IAAYT,CAAC,CAACG,MAAF,CAASC,KAAxC,CAAjB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYI,UAAZ;AACAI,IAAAA,WAAW,CAACJ,UAAD,CAAX;AACD,GANH;;AASF,MAAIK,OAAO,GAAGb,KAAK,CAACc,IAAN,CAAW,CAAX,CAAd;;AACA,MAAID,OAAJ,EAAa;AACX,QAAIE,EAAE,GAAGF,OAAO,CAACE,EAAjB,CADW,CAEX;;AACA,QAAI,CAACR,KAAK,CAACS,GAAN,CAAUN,IAAI,IAAIA,IAAI,CAACC,GAAvB,EAA4BM,QAA5B,CAAqCF,EAAE,CAACJ,GAAxC,CAAL,EAAmD;AACjD;AACAO,MAAAA,QAAQ,CACNX,KAAK,CAACY,MAAN,CAAa;AACXC,QAAAA,KAAK,EAAEL,EAAE,CAACM,IADC;AAEXV,QAAAA,GAAG,EAAEI,EAAE,CAACJ,GAFG;AAGXW,QAAAA,GAAG,EAAEP,EAAE,CAACO,GAHG;AAIXC,QAAAA,IAAI,EAAER,EAAE,CAACQ;AAJE,OAAb,CADM,CAAR;AAQD;AAAC;;;;;;;;;;;;;AAYH;;AAEC,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,EAEA;AAAQ,IAAA,QAAQ,EAAEtB,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGM,KAAK,CAACS,GAAN,CAAU,CAACN,IAAD,EAAOc,CAAP,KACT;AAAQ,IAAA,GAAG,EAAEA,CAAb;AAAgB,IAAA,KAAK,EAAEd,IAAI,CAACC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACUD,IAAI,CAACU,KADf,YAC4BV,IAAI,CAACC,GADjC,CADD,CADH,CAFA,CADJ;AAYH,CApDD;;AAsDA,eAAeb,SAAS,CAAC;AACrB2B,EAAAA,KAAK,EAAE;AADc,CAAD,CAAT,CAEV1B,UAFU,CAAf","sourcesContent":["import React from 'react' \nimport { subscribe } from 'mqtt-react'\n\n\nconst SelectTram = (props) => {\n    \n\n    const handleChooseTram = e => {\n        console.log('TRAM CHOSEN: ', e.target.value)\n        console.log('TRAMS: ', trams)\n        let chosenTram = trams.find(tram => tram.veh == e.target.value)\n        console.log(chosenTram) \n        setShowTram(chosenTram)\n      }\n\n\n  let newData = props.data[0]\n  if (newData) {\n    let VP = newData.VP\n    //console.log(new Date())\n    if (!trams.map(tram => tram.veh).includes(VP.veh)) {\n      //console.log(new Date(), 'trams: ', trams.length)\n      setTrams(\n        trams.concat({\n          linja: VP.desi,\n          veh: VP.veh,\n          lat: VP.lat,\n          long: VP.long,\n        })\n      )\n    } /* else {\n      //console.log('hep', new Date())\n       let newTrams =  \n        trams.map(tram => tram.veh === VP.veh ? {\n          linja: VP.desi,\n          veh: VP.veh,\n          lat: VP.lat,\n          long: VP.long,\n        }: tram) \n        //console.log(newTrams)\n        setTrams(newTrams) \n    }  */\n  }\n    \n    return (\n        <div>\n        <p>valitse ratikka:</p>\n        <select onChange={handleChooseTram}>\n          {trams.map((tram, i) => (\n            <option key={i} value={tram.veh}>\n              linja: {tram.linja} veh: {tram.veh}\n            </option>\n          ))}\n        </select>\n      </div> \n    )\n}\n\nexport default subscribe({\n    topic: '/hfp/v2/journey/ongoing/vp/tram/#',\n  })(SelectTram)"]},"metadata":{},"sourceType":"module"}